/**
 * yjs - A framework for real-time p2p shared editing on any data
 * @version v12.1.4
 * @link http://y-js.org
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.yWebworker=e()}}(function(){return function e(t,o,r){function n(s,u){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){var o=t[s][1][e];return n(o?o:e)},c,c.exports,e,t,o,r)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s)}function u(e){var t=function(e){function t(e,o){if(r(this,t),void 0===o)throw new Error("Options must not be undefined!");if(null==o.room)throw new Error("You must define a room name!");if(null==o.url)throw new Error('You must specify a url to the web worker! (E.g. "bower_components/y-webworker/webworker.js")');var i=new SharedWorker(o.url,"Yjs Web Worker");o.role="slave";var u=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));u.y.db.stopGarbageCollector(),u.options=o,u.guid=s();var a=u;return u.webworker=i,u.port=i.port,u.port.start(),u.messageEventListener=function(e){e.data.room!==o.room||null!=e.data.guid&&e.data.guid!==a.guid||("message"===e.data.type&&a.receiveMessage("webworker",e.data.message),"join"===e.data.type&&null==a.connections.webworker&&(a.userJoined("webworker","master"),a.whenSynced(function(){a.setUserId(a.guid)})))},u.port.addEventListener("message",u.messageEventListener),u.port.postMessage({type:"join",room:o.room,auth:o.auth,guid:a.guid}),u}return i(t,e),a(t,[{key:"destroy",value:function(){this.port.removeEventListener("message",this.messageEventListener),this.userLeft("webworker"),this.port.postMessage({type:"leave",room:this.options.room,guid:this.guid})}},{key:"disconnect",value:function(){}},{key:"reconnect",value:function(){}},{key:"send",value:function(e,t){this.broadcast(t)}},{key:"broadcast",value:function(e){this.port.postMessage({type:"message",room:this.options.room,message:e,guid:this.guid})}},{key:"isDisconnected",value:function(){return!1}}]),t}(e.AbstractConnector);e.extend("webworker",t)}var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();t.exports=u,"undefined"!=typeof Y&&u(Y)},{}]},{},[1])(1)});
//# sourceMappingURL=y-webworker.js.map
